<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Jithin's Blog (Posts about python)</title><link>https://j-jith.github.io/</link><description></description><atom:link type="application/rss+xml" rel="self" href="https://j-jith.github.io/categories/cat_python.xml"></atom:link><language>en</language><copyright>Contents Â© 2017 &lt;a href="mailto:j.jith@outlook.com"&gt;Jithin Jith&lt;/a&gt; </copyright><lastBuildDate>Tue, 31 Oct 2017 05:35:58 GMT</lastBuildDate><generator>Nikola (getnikola.com)</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>Python script for logging in to IIT Madras netaccess</title><link>https://j-jith.github.io/posts/python-script-for-logging-in-to-iit-madras-netaccess/</link><dc:creator>Jithin Jith</dc:creator><description>&lt;div&gt;&lt;p&gt;This is a small python script which I wrote for easy login to netaccess at IIT
Madras. The script is pretty self-explanatory. I wrote this when I was trying
to learn the &lt;tt class="docutils literal"&gt;requests&lt;/tt&gt; module for python. The script uses the &lt;tt class="docutils literal"&gt;requests&lt;/tt&gt;
module to communicate with the netaccess site. It also uses the user agent
string of a browser to make the netaccess site think that it's dealing with a
browser. Note that you can set a default username in &lt;tt class="docutils literal"&gt;get_login_data()&lt;/tt&gt;
function. Set it to your roll number so that you don't have to enter it every
time you call the script. The password has to be entered manually because I
didn't want to store it in plain text.&lt;/p&gt;
&lt;p&gt;PS: Remember to put the script in your &lt;tt class="docutils literal"&gt;$PATH&lt;/tt&gt; for ease of use.&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-1"&gt;&lt;/a&gt;&lt;span class="ch"&gt;#!/usr/bin/env python&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-2"&gt;&lt;/a&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;__future__&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;print_function&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;division&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-3"&gt;&lt;/a&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;requests&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-4"&gt;&lt;/a&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;getpass&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-5"&gt;&lt;/a&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;sys&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-6"&gt;&lt;/a&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-7"&gt;&lt;/a&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-8"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;get_login_data&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-9"&gt;&lt;/a&gt;    &lt;span class="sd"&gt;'''Asks the user for the username and password. Returns a dictionary to be&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-10"&gt;&lt;/a&gt;&lt;span class="sd"&gt;    passed to the /account/login post request.&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-11"&gt;&lt;/a&gt;&lt;span class="sd"&gt;    '''&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-12"&gt;&lt;/a&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-13"&gt;&lt;/a&gt;    &lt;span class="n"&gt;username&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;input&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'Enter username (Empty input defaults to "am12d013"): '&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-14"&gt;&lt;/a&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-15"&gt;&lt;/a&gt;    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;username&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-16"&gt;&lt;/a&gt;        &lt;span class="n"&gt;username&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'am12d013'&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-17"&gt;&lt;/a&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-18"&gt;&lt;/a&gt;    &lt;span class="n"&gt;password&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;''&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-19"&gt;&lt;/a&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-20"&gt;&lt;/a&gt;    &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;password&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-21"&gt;&lt;/a&gt;        &lt;span class="n"&gt;password&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;getpass&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getpass&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'Enter password (Cannot be empty): '&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-22"&gt;&lt;/a&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-23"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;#return {'username': username, 'password': password}&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-24"&gt;&lt;/a&gt;    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;'userLogin'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;username&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'userPassword'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;password&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-25"&gt;&lt;/a&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-26"&gt;&lt;/a&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-27"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;get_approve_data&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-28"&gt;&lt;/a&gt;    &lt;span class="sd"&gt;'''Asks the user for the duration to be logged in for. Returns a dictionary&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-29"&gt;&lt;/a&gt;&lt;span class="sd"&gt;    to be passed to the /account/approve post request.&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-30"&gt;&lt;/a&gt;&lt;span class="sd"&gt;    '''&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-31"&gt;&lt;/a&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-32"&gt;&lt;/a&gt;    &lt;span class="n"&gt;duration&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;input&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'Enter session duration (1: 1 hour, 2: 1 day, empty defaults to 1): '&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-33"&gt;&lt;/a&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-34"&gt;&lt;/a&gt;    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;duration&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;duration&lt;/span&gt;&lt;span class="o"&gt;!=&lt;/span&gt;&lt;span class="s1"&gt;'2'&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-35"&gt;&lt;/a&gt;        &lt;span class="n"&gt;duration&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'1'&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-36"&gt;&lt;/a&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-37"&gt;&lt;/a&gt;    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;duration&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;'1'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-38"&gt;&lt;/a&gt;        &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'You have requested approval for 1 hour'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-39"&gt;&lt;/a&gt;    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-40"&gt;&lt;/a&gt;        &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'You have requested approval for 1 day'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-41"&gt;&lt;/a&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-42"&gt;&lt;/a&gt;    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;'duration'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;duration&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'approveBtn'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;''&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-43"&gt;&lt;/a&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-44"&gt;&lt;/a&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-45"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;has_logged_in&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;response&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-46"&gt;&lt;/a&gt;    &lt;span class="sd"&gt;'''Checks if login request is successful. Returns false if not.&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-47"&gt;&lt;/a&gt;&lt;span class="sd"&gt;    '''&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-48"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# If response is not 200 OK, raise error&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-49"&gt;&lt;/a&gt;    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;response&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;status_code&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="n"&gt;requests&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;codes&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ok&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-50"&gt;&lt;/a&gt;        &lt;span class="n"&gt;response&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;raise_for_status&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-51"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# Check if login has failed by searching for a substring in the response&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-52"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# content&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-53"&gt;&lt;/a&gt;    &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="s1"&gt;'/account/approve'&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;response&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-54"&gt;&lt;/a&gt;        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;False&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-55"&gt;&lt;/a&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-56"&gt;&lt;/a&gt;    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-57"&gt;&lt;/a&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-58"&gt;&lt;/a&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-59"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-60"&gt;&lt;/a&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-61"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# User agent string from Firefox 49 running on a Linux machine&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-62"&gt;&lt;/a&gt;    &lt;span class="n"&gt;headers&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;'User-Agent'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:49.0) Gecko/20100101 Firefox/49.0'&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-63"&gt;&lt;/a&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-64"&gt;&lt;/a&gt;    &lt;span class="n"&gt;login_data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;get_login_data&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-65"&gt;&lt;/a&gt;    &lt;span class="n"&gt;approve_data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;get_approve_data&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-66"&gt;&lt;/a&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-67"&gt;&lt;/a&gt;    &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;requests&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Session&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-68"&gt;&lt;/a&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-69"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# Login request&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-70"&gt;&lt;/a&gt;        &lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;post&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'https://netaccess.iitm.ac.in/account/login'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-71"&gt;&lt;/a&gt;                &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;login_data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;headers&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;headers&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-72"&gt;&lt;/a&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-73"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# Check if login is successful.&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-74"&gt;&lt;/a&gt;        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;has_logged_in&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-75"&gt;&lt;/a&gt;            &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'Login successful.'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-76"&gt;&lt;/a&gt;        &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-77"&gt;&lt;/a&gt;            &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'Wrong username or password provided. Login failed!'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-78"&gt;&lt;/a&gt;            &lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;exit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-79"&gt;&lt;/a&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-80"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# Approve machine request&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-81"&gt;&lt;/a&gt;        &lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;post&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'https://netaccess.iitm.ac.in/account/approve'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-82"&gt;&lt;/a&gt;                &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;approve_data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;headers&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;headers&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-83"&gt;&lt;/a&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-84"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# If response is not 200 OK, approval has failed. Exit.&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-85"&gt;&lt;/a&gt;        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;status_code&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="n"&gt;requests&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;codes&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ok&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-86"&gt;&lt;/a&gt;            &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;raise_for_status&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-87"&gt;&lt;/a&gt;        &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-88"&gt;&lt;/a&gt;            &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'Machine approved successfully.'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-89"&gt;&lt;/a&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-90"&gt;&lt;/a&gt;        &lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;exit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-91"&gt;&lt;/a&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-92"&gt;&lt;/a&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-93"&gt;&lt;/a&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="vm"&gt;__name__&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;'__main__'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-94"&gt;&lt;/a&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-95"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# If python2.x, use 'raw_input' else use 'input'&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-96"&gt;&lt;/a&gt;    &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-97"&gt;&lt;/a&gt;        &lt;span class="nb"&gt;input&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;raw_input&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-98"&gt;&lt;/a&gt;    &lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="ne"&gt;NameError&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-99"&gt;&lt;/a&gt;        &lt;span class="k"&gt;pass&lt;/span&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-100"&gt;&lt;/a&gt;
&lt;a name="rest_code_c9c73e182e2d495fa86a528dab8ba298-101"&gt;&lt;/a&gt;    &lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</description><category>iitm</category><category>python</category><guid>https://j-jith.github.io/posts/python-script-for-logging-in-to-iit-madras-netaccess/</guid><pubDate>Tue, 31 Oct 2017 05:25:56 GMT</pubDate></item></channel></rss>